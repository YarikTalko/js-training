<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS AJAX Intro/XMLHTTP/Request/Response/XML</title>
</head>
<body>
<!--<p id="demo"></p>-->
<!--<button type="button" onclick="loadDoc()">Клац</button>-->
<button type="button" onclick="loadDoc()">Get ny CD Collection</button>
<br><br>
<table id="demo"></table>

<script>
    // function loadDoc() {
    //     const xhttp = new XMLHttpRequest();
    //     // xhttp.onload = function () {
    //     //     document.getElementById("demo").innerHTML =
    //     //         this.responseText;
    //     // }
    //     xhttp.onreadystatechange = function () {
    //         if (this.readyState === 4 && this.status === 200) {
    //             document.getElementById("demo").innerHTML =
    //                 this.responseText;
    //         }
    //     }
    //     xhttp.open("GET", "ajax-info.txt");
    //     xhttp.send();
    // }

    // const xhttp = new XMLHttpRequest();
    // xhttp.onload = function () {
    //     const xmlDoc = this.responseXML;
    //     const x = xmlDoc.getElementsByTagName("ARTIST");
    //     let txt = "";
    //     for (let i = 0; i < x.length; i++) {
    //         txt = txt + x[i].childNodes[0].nodeValue + "<br>";
    //     }
    //     document.getElementById("demo").innerHTML = txt;
    // };
    // xhttp.open("GET", "cd_catalog.xml");
    // xhttp.send();

    // const xhttp = new XMLHttpRequest();
    // xhttp.onload = function () {
    //     document.getElementById("demo").innerHTML =
    //         // this.getAllResponseHeaders();
    //         this.getResponseHeader("Last-Modified");
    // }
    // xhttp.open("GET", "ajax-info.txt");
    // xhttp.send();

    function loadDoc() {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function () {
            myFunction(this);
        }
        xhttp.open("GET", "cd_catalog.xml");
        xhttp.send();
    }

    function myFunction(xml) {
        const xmlDoc = xml.responseXML;
        const x = xmlDoc.getElementsByTagName("CD");
        let table = "<tr><th>Artist</th><th>Title</th></tr>";
        for (let i = 0; i < x.length; i++) {
            table += "<tr><td>" +
                x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
                "</td><td>" +
                x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
                "</td><tr>";
        }
        document.getElementById("demo").innerHTML = table;
    }
</script>
</body>
</html>